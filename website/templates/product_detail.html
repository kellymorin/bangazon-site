{% extends "index.html" %}
{% load humanize %}

{% block content %}

    <div class="row">
      <div class="col-sm-6 my-4">
        <img class="mx-auto d-block" src="https://via.placeholder.com/350" alt="Placeholder for product image"/>
      </div>
      <div class="col-sm-6 my-4">
        <h3>{{product_details.title}}</h3>
        <p>Sold by: {{product_details.username}}</p>
        {% if seller_is_favorited %}
          <form action="{% url 'website:product_details' product_details.id %}" method="POST">
            {% csrf_token %}
            <input type="hidden" value="current_favorite" name="current_favorite">
            <button class="btn btn-danger btn-sm">Unfavorite this Seller</button>
          </form>
        {% else %}
          <form action="{% url 'website:product_details' product_details.id %}" method="POST">
            {% csrf_token %}
            <button class="btn btn-success btn-sm">Favorite this Seller</button>
          </form>
        {% endif %}
        <hr />
        {% if product_details.get_available_count == 0 %}
        <p class="badge badge-secondary">Sold out!</p>
        {% elif product_details.get_available_count < 5 %}
        <p class="badge badge-secondary">Almost sold out!</p>
        {% endif %}
          <p>Qty: {{product_details.get_available_count}}</p>
          <p>Price: ${{product_details.price|intcomma}}</p>
        <p>{{product_details.description}}</p>
        {% if product_details.get_available_count == 0 %}
          <button class="btn btn-primary btn-block mb-4" disabled>
              <i class="fas fa-cart-plus"></i>
              Add to Cart
          </button>
        {% else %}
          <a href="{% url 'website:add_to_cart' product_details.id %}" class="btn btn-primary btn-block mb-4">
              <i class="fas fa-cart-plus"></i>
              Add to Cart
          </a>
        {% endif %}
        {% if product_details.get_cart_count > 0 %}
          {% if product_details.get_cart_count == 1 %}
            <div>
              <i class="fas fa-shopping-cart"></i>
              <strong>Other people want this.</strong> {{product_details.get_cart_count}} person has this in their cart right now.
            </div>
          {% elif product_details.get_cart_count > 1 %}
            <div>
              <i class="fas fa-shopping-cart"></i>
              <strong>Other people want this.</strong> {{product_details.get_cart_count}} people have this in their cart right now.
            </div>
          {% endif %}

        {% endif %}
      </div>
    </div>

{% endblock content %}