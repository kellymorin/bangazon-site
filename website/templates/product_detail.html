{% extends "index.html" %}
{% load humanize %}

{% block content %}

  {% if error_message %}
    <div class="alert alert-danger" role="alert">
        <a href="{% url 'website:login' %}">{{error_message}}</a>
    </div>
  {% endif %}

    <div class="row">
      <div class="col-sm-6 my-4">
        <img class="mx-auto d-block" src="https://via.placeholder.com/350" alt="Placeholder for product image"/>
      </div>
      <div class="col-sm-6 my-4">
        <h3>{{product_details.title}}</h3>
        {% if quantity == 0 %}
        <p class="badge badge-secondary">Sold out!</p>
        {% elif quantity < 5 %}
        <p class="badge badge-secondary">Almost sold out!</p>
        {% endif %}
          <p>Qty: {{quantity}}</p>
          <p>Price: ${{product_details.price|intcomma}}</p>
        <p>{{product_details.description}}</p>
        {% if quantity == 0 %}
          <button class="btn btn-primary btn-block mb-4" disabled>
              <i class="fas fa-cart-plus"></i>
              Add to Cart
          </button>
        {% else %}
          <a href="{% url 'website:add_to_cart' product_details.id %}" class="btn btn-primary btn-block mb-4">
              <i class="fas fa-cart-plus"></i>
              Add to Cart
          </a>
        {% endif %}
        {% if cart_count > 0 %}
          {% if cart_count == 1 %}
            <div>
              <i class="fas fa-shopping-cart"></i>
              <strong>Other people want this.</strong> {{cart_count}} person has this in their cart right now.
            </div>
          {% elif cart_count > 1 %}
            <div>
              <i class="fas fa-shopping-cart"></i>
              <strong>Other people want this.</strong> {{cart_count}} people have this in their cart right now.
            </div>
          {% endif %}

        {% endif %}
      </div>
    </div>

{% endblock content %}