{% extends 'index.html' %}
{% load crispy_forms_tags %}

   {% block content %}
        <h1>{{user}}'s User Settings</h1>
        {% if form %}
            <form method="post" action="{% url "website:customer_profile" %}">
                {% csrf_token %}
                {{form.formA|crispy}}
                {{form.formB|crispy}}
                <input type="submit" value="Submit">
            </form>
        {% else %}
            <h4>Name:</h4>
            <p>{{user.first_name}} {{user.last_name}}</p>
            <h4>Address:</h4>
            <p>{{user.customer.street_address}} <br> {{user.customer.city}}, {{user.customer.state}} {{user.customer.zipcode}}</p>
            <h4>Phone Number:</h4>
            <p>{{user.customer.phone_number}}</p>

            <form method="post" action="{% url "website:customer_profile" %}">
                {% csrf_token %}
                <input type="hidden" name="edit" value="edit">
                <input class="btn btn-primary" type="submit" value="Edit">
            </form>

        {% endif %}

        <h2>Payment Types</h2>
            <ul class="list-group" >
                {% for payment_type in user.customer.paymenttype_set.all %}
                    <li class="list-group-item">{{payment_type.name}}</li>
                {% endfor %}

            </ul>
            <a class="btn btn-primary" href="{% url "website:add_payment"%}">Add Payment Type</a>


        <h2>Order History</h2>
            <ul class="list-group">
                {% for order in user.customer.order_set.all %}
                    <li class="list-group-item">{{order.id}}</li>
                {% endfor %}

            </ul>



    {% endblock content %}